<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skills 配置 - Claude 网页版</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/skills.css') }}">
</head>
<body>
    <div class="skills-layout">
        <!-- 顶部导航 -->
        <div class="skills-header">
            <h1>Skills 管理</h1>
            <div class="header-actions">
                <a href="/" class="btn-back">返回聊天</a>
                <a href="/memory-config" class="btn-memory">🧠 记忆</a>
                <a href="/mcp-config" class="btn-mcp">MCP 配置</a>
                <a href="/logout" class="logout-btn">退出</a>
            </div>
        </div>

        <!-- 主内容区 -->
        <div class="skills-main">
            <!-- 左侧技能列表 -->
            <div class="skills-sidebar">
                <div class="sidebar-header">
                    <h2>技能列表</h2>
                    <button class="btn-add" onclick="showAddSkillModal()">+ 创建技能</button>
                </div>
                <div class="skills-list" id="skillsList">
                    <div class="loading">加载中...</div>
                </div>
            </div>

            <!-- 右侧技能编辑器 -->
            <div class="skills-content">
                <div class="skills-welcome" id="skillsWelcome">
                    <h2>👋 欢迎使用 Skills 管理</h2>
                    <p>选择左侧的技能查看和编辑，或点击"创建技能"编写新的 skill。</p>
                    <div class="quick-templates">
                        <h3>快速模板：</h3>
                        <div class="template-buttons">
                            <button class="template-btn" onclick="createFromTemplate('python')">
                                <span class="template-icon">🐍</span>
                                <span class="template-name">Python 技能</span>
                            </button>
                            <button class="template-btn" onclick="createFromTemplate('tool')">
                                <span class="template-icon">🔧</span>
                                <span class="template-name">工具技能</span>
                            </button>
                            <button class="template-btn" onclick="createFromTemplate('transform')">
                                <span class="template-icon">🔄</span>
                                <span class="template-name">数据转换</span>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="skills-editor" id="skillsEditor" style="display: none;">
                    <div class="editor-header">
                        <div class="editor-title">
                            <input type="text" id="skillName" placeholder="技能名称" class="skill-name-input">
                            <select id="skillType" class="skill-type-select">
                                <option value="python">Python</option>
                                <option value="javascript">JavaScript</option>
                                <option value="tool">工具包装</option>
                                <option value="transform">数据转换</option>
                            </select>
                        </div>
                        <div class="editor-actions">
                            <button class="btn-test" onclick="testSkill()">测试</button>
                            <button class="btn-save" onclick="saveSkill()">保存</button>
                            <button class="btn-delete" onclick="deleteSkill()">删除</button>
                        </div>
                    </div>

                    <div class="editor-tabs">
                        <button class="tab-btn active" onclick="switchTab('code')" data-tab="code">代码</button>
                        <button class="tab-btn" onclick="switchTab('config')" data-tab="config">配置</button>
                        <button class="tab-btn" onclick="switchTab('docs')" data-tab="docs">文档</button>
                    </div>

                    <div class="editor-body">
                        <div class="tab-content active" id="tab-code">
                            <div class="code-editor-container">
                                <textarea id="skillCode" class="skill-code-editor" placeholder="# 编写你的 Python 技能代码

class MySkill:
    @staticmethod
    def execute(input_data):
        return {'result': 'Hello, World!'}
"></textarea>
                            </div>
                        </div>

                        <div class="tab-content" id="tab-config" style="display: none;">
                            <div class="config-editor">
                                <div class="form-group">
                                    <label>技能描述</label>
                                    <textarea id="skillDescription" class="config-textarea" placeholder="描述这个技能的功能..."></textarea>
                                </div>
                                <div class="form-group">
                                    <label>配置 (JSON)</label>
                                    <textarea id="skillConfig" class="config-textarea" placeholder='{
    "timeout": 30,
    "max_retries": 3
}'></textarea>
                                </div>
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="skillEnabled" checked>
                                        <span>启用技能</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="tab-content" id="tab-docs" style="display: none;">
                            <div class="docs-editor">
                                <div class="doc-section">
                                    <h4>使用示例</h4>
                                    <textarea id="skillExample" class="doc-textarea" placeholder="# 使用示例
skill = MySkill()
result = skill.execute({'key': 'value'})
print(result)
"></textarea>
                                </div>
                                <div class="doc-section">
                                    <h4>输入参数</h4>
                                    <textarea id="skillInputSchema" class="doc-textarea" placeholder='{
    "type": "object",
    "properties": {
        "param1": {"type": "string"}
    }
}'></textarea>
                                </div>
                                <div class="doc-section">
                                    <h4>输出格式</h4>
                                    <textarea id="skillOutputSchema" class="doc-textarea" placeholder='{
    "type": "object",
    "properties": {
        "result": {"type": "string"}
    }
}'></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 创建/编辑技能模态框 -->
    <div class="skills-modal" id="skillModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="skillModalTitle">创建技能</h3>
                <button class="close-modal" onclick="closeSkillModal()">✕</button>
            </div>
            <div class="modal-body">
                <form id="skillForm">
                    <input type="hidden" id="editSkillId">
                    <div class="form-group">
                        <label>技能名称 *</label>
                        <input type="text" id="modalSkillName" placeholder="例如：数据处理工具" required>
                    </div>
                    <div class="form-group">
                        <label>技能类型 *</label>
                        <select id="modalSkillType" required>
                            <option value="python">Python</option>
                            <option value="javascript">JavaScript</option>
                            <option value="tool">工具包装</option>
                            <option value="transform">数据转换</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>描述</label>
                        <textarea id="modalSkillDescription" placeholder="描述这个技能的功能..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" onclick="closeSkillModal()">取消</button>
                <button class="btn-create" onclick="createSkill()">创建</button>
            </div>
        </div>
    </div>

    <!-- 测试结果模态框 -->
    <div class="skills-modal" id="testModal" style="display: none;">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>测试结果</h3>
                <button class="close-modal" onclick="closeTestModal()">✕</button>
            </div>
            <div class="modal-body">
                <div class="test-input">
                    <label>测试输入 (JSON)</label>
                    <textarea id="testInput" class="test-textarea" placeholder='{"key": "value"}'></textarea>
                </div>
                <div class="test-actions">
                    <button class="btn-run-test" onclick="runSkillTest()">运行测试</button>
                </div>
                <div class="test-output">
                    <label>输出结果</label>
                    <pre id="testOutput" class="test-result">等待测试...</pre>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/skills.js') }}"></script>
</body>
</html>
